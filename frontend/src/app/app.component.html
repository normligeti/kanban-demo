<div class="page">
  <h1>Kanban Demo</h1>

  <div class="toolbar">
    <select [(ngModel)]="newCardColumnId">
      <option [value]="1">Backlog</option>
      <option [value]="2">In Progress</option>
      <option [value]="3">Done</option>
    </select>
    <input [(ngModel)]="newCardTitle" placeholder="Card title" />
    <input [(ngModel)]="newCardDescription" placeholder="Card description" />
    <button (click)="addCard()">Add Card</button>
  </div>

  <p *ngIf="loading$ | async">Loading board...</p>
  <p *ngIf="error$ | async as error" style="color: #b91c1c">{{ error }}</p>

  <ng-container *ngIf="board$ | async as board">
    <h2>{{ board.name }}</h2>

    <div class="board-columns">
      <div class="column" *ngFor="let column of board.columns">
        <h3>{{ column.title }}</h3>

        <div class="card" *ngFor="let card of column.cards">
          <strong>{{ card.title }}</strong>
          <p>{{ card.description }}</p>

          <div class="toolbar">
            <button *ngIf="column.id !== 1" (click)="moveCard(card.id, 1)">To Backlog</button>
            <button *ngIf="column.id !== 2" (click)="moveCard(card.id, 2)">To In Progress</button>
            <button *ngIf="column.id !== 3" (click)="moveCard(card.id, 3)">To Done</button>
          </div>
        </div>
      </div>
    </div>
  </ng-container>
</div>
